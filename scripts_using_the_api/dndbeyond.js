
const playerId = document.getElementById("dndbeyondid");
var buttonBackground = "url('data:image/png;base64,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')";

if (playerId != null{
    const updateApiUrl = 'https://dm.samoore.page/dndbeyondupdate';
    const dbbutton = document.getElementById("dndbeyondbutton");
    let button = document.createElement("button");
    button.style.backgroundImage = buttonBackground;
    button.style.backgroundSize = "cover";
    button.style.backgroundPosition = "center";
    button.style.backgroundRepeat = "no-repeat";
    button.style.width = "5rem";
    button.style.height = "2rem";
    botton.eventListener("click", sendPlayerIdToUpdateApi);
    dbbutton.appendChild(button);
}

// Function to send player ID to the update API
async function sendPlayerIdToUpdateApi() {
    try {
        const response = await fetch(updateApiUrl, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({ id: playerId }),
        });

        if (!response.ok) {
            throw new Error('Failed to send player ID to update API');
        }

        const responseData = await response.json();
        console.log(responseData);
        location.reload();
    } catch (error) {
        console.error(error);
        return null;
    }
}